<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Audio Player</title>
  <style>
    body {
      margin: 0;
      background-color: black;
    }
    iframe {
      width: 940px;
      height: 128px;
      border: none;
      border-radius: 10px;
      box-shadow: 0 0 20px 10px black;
    }
    #fmcloud, #backup {
      display: none;
    }
  </style>
</head>
<body>

<iframe id="fmcloud" src=".https://fmcloud.pro/embed.php?id=347&autoplay=true" allow="autoplay"></iframe>
<iframe id="backup" src="" allow="autoplay"></iframe>

<script>
  const fm = document.getElementById('fmcloud');
  const backup = document.getElementById('backup');

  let fallbackTimer = null;

  // Zobrazíme FMCloud iframe
  fm.style.display = 'block';

  // Spustíme čekání (např. 4 sekundy)
  fallbackTimer = setTimeout(() => {
    // Pokud FMCloud iframe je PRÁZDNÝ nebo obsahuje chybový stav, přepneme na zálohu
    console.warn("FMCloud neodpovídá – přepínám na zálohu");
    fm.style.display = 'none';
    backup.src = "https://trolltrolli.github.io/SKT/Popis/HL2/player_backup.html";
    backup.style.display = 'block';
  }, 4000);

  // Když se iframe fakt načte bez failu, zrušíme timeout
  fm.onload = () => {
    clearTimeout(fallbackTimer);

    // ALE! Ještě musíme zjistit, jestli je obsah iframe fakt validní.
    // Bohužel do cizí domény nemůžeme vlézt – tak budeme riskovat.
    // → Pokud se načte, tak necháme být. Ale můžeš sem dát další kontrolu, např. pomocí postMessage z fmcloud (pokud podporuje).
    console.log("FMCloud načten – timeout zrušen.");
  };
</script>

</body>
</html>
