<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Audio Player</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .player-container {
      width: 940px;
      padding: 15px;
      background-color: #222;
      border-radius: 10px;
      box-shadow: 0 0 20px 10px black;
      text-align: center;
    }
    audio {
      width: 100%;
      border-radius: 5px;
    }
    iframe {
      width: 940px;
      height: 128px;
      border: none;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<div class="player-container" id="playerBox">
  <p id="status">üéµ HL2 - Hazardous Environments</p>
  <iframe id="fmPlayer" style="display: none;" allow="autoplay"></iframe>
  <audio id="backupPlayer" src="./audio.mp3" autoplay loop controls style="display: none;"></audio>
</div>

<script>
  const fmUrl = ".https://fmcloud.pro/embed.php?id=347&autoplay=true";
  const iframe = document.getElementById("fmPlayer");
  const backup = document.getElementById("backupPlayer");
  const status = document.getElementById("status");

  // Testujeme dostupnost FMCloud
  fetch(fmUrl, { method: 'HEAD', mode: 'no-cors' }) // no-cors kv≈Øli CORS limit≈Øm
    .then(() => {
      iframe.src = fmUrl;
      iframe.style.display = "block";
    })
    .catch(() => {
      status.textContent = "üéµ FMCloud nedostupn√Ω ‚Äì p≈ôehr√°v√°m z√°lohu";
      backup.style.display = "block";
      backup.play().catch(() => {
        console.warn("Autoplay blokov√°n, klikni pro p≈ôehr√°n√≠.");
      });
    });

  // Fallback timeout pro p≈ô√≠pad, ≈æe server vis√≠ bez odpovƒõdi
  setTimeout(() => {
    if (!iframe.src) {
      status.textContent = "üéµ FMCloud timeout ‚Äì p≈ôehr√°v√°m z√°lohu";
      backup.style.display = "block";
      backup.play().catch(() => {
        console.warn("Autoplay blokov√°n, klikni pro p≈ôehr√°n√≠.");
      });
    }
  }, 5000);
</script>

</body>
</html>
