<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Audio Player Fallback</title>
  <style>
    body {
      margin: 0;
      background-color: black;
    }
    #fmPlayer, #backupPlayer {
      width: 940px;
      height: 128px;
      display: none;
      border: none;
    }
  </style>
</head>
<body>

<iframe id="fmPlayer" allow="autoplay"></iframe>
<audio id="backupPlayer" src="./audio.mp3" autoplay loop controls></audio>

<script>
  const fmUrl = "https://fmcloud.pro/embed.php?id=347&autoplay=true";
  const fmPlayer = document.getElementById("fmPlayer");
  const backupPlayer = document.getElementById("backupPlayer");

  // Pokusíme se nejdřív načíst FMCloud iframe
  fetch(fmUrl, { method: 'HEAD' })
    .then(response => {
      if (response.ok) {
        fmPlayer.src = fmUrl;
        fmPlayer.style.display = "block";
      } else {
        throw new Error("FMCloud nedostupný");
      }
    })
    .catch(() => {
      // FMCloud selhal → přehráváme zálohu
      backupPlayer.style.display = "block";
      backupPlayer.play().catch(() => {
        console.warn("Autoplay zablokován, klikni pro přehrání.");
      });
    });
</script>

</body>
</html>
