<!DOCTYPE html>
<html>
<head>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const fmIframe = document.getElementById('fmIframe');
            const backupPlayer = document.getElementById('backupPlayer');
            const audioSrc = './audio.mp3';

            // Kontrola načtení iframe
            fmIframe.onload = function () {
                console.log('FMcloud player loaded successfully.');
            };

            fmIframe.onerror = function () {
                console.log('FMcloud player failed to load. Switching to backup.');
                fmIframe.style.display = 'none';
                backupPlayer.style.display = 'block';

                const audioElement = document.getElementById('audioPlayer');
                audioElement.src = audioSrc;

                // Automatické spuštění záložního přehrávače
                audioElement.play().catch(() => {
                    console.log('Autoplay blocked. User interaction required.');
                    backupPlayer.innerHTML += '<p>Klikni pro spuštění</p>';
                    backupPlayer.onclick = () => audioElement.play();
                });
            };
        });
    </script>
</head>
<body>
    <!-- FMcloud Embed -->
    <iframe 
        id="fmIframe" 
        src=".https://fmcloud.pro/embed.php?id=347&autoplay=true" 
        width="940" 
        height="128" 
        frameborder="0" 
        scrolling="no" 
        style="margin-left: -10px; margin-top: -10px; border: 1px solid #444; border-radius: 10px; box-shadow: 0 0 20px 20px black; opacity: .8;">
    </iframe>

    <!-- Záložní přehrávač -->
    <div id="backupPlayer" style="display: none; background-color:#222; color:#fff; padding:15px; width:910px; height:98px; border-radius:8px; box-shadow:0px 4px 10px rgba(0,0,0,0.5); font-family:Arial,sans-serif; text-align:center;">
        <p style="margin:0 0 10px;">🎵 HL2 - Hazardous Environments</p>
        <audio 
            id="audioPlayer" 
            controls 
            autoplay 
            style="width:100%; border-radius:5px;">
            <source src="./audio.mp3" type="audio/mpeg">
        </audio>
    </div>
</body>
</html>
